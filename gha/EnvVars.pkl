// ==-----------------------------------------------------------== //
// SPDX-FileCopyrightText: Â© 2025 Nayan Patil <nayantsg@proton.me>
//
// SPDX-License-Identifier: Apache-2.0
// ==-----------------------------------------------------------== //

@ModuleInfo { minPklVersion = "0.27.0" }
module EnvVars

import "../schemas/GitHubAction.pkl" as gha

const rustEnvFull = new gha.EnvironmentVariables {
  ["CARGO_INCREMENTAL"] = 0
  ["CARGO_NET_RETRY"] = 10
  ["CARGO_TERM_COLOR"] = "always"
  ["RUST_BACKTRACE"] = 1
  ["RUSTFLAGS"] = "-D warnings"
  ["RUSTUP_MAX_RETRIES"] = 10
  ["CARGO_HACK_DENY_WARNINGS"] = 1
}

const rustEnvTest = new gha.EnvironmentVariables {
  ["CARGO_PROFILE_DEV_DEBUG"] = 1
  ["CARGO_PROFILE_TEST_DEBUG"] = 1
  // Workaround for https://github.com/rust-lang/rustup/issues/3036
  ["RUSTUP_WINDOWS_PATH_ADD_BIN"] = 0
}
